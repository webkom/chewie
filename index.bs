import debug
import http

import ./websockets as handleMessages

import ./app

server = http.Server(app)
io = require('socket.io')(server)

debug = debug('chewie.abakus.no')

app.set('port', process.env.PORT or 3000)

server.listen(app.get('port'), () ->
  debug('Listening on port' + server.address().port)
)

handleMessages(io)
